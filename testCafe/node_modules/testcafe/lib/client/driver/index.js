!function(){function initTestCafeClientDrivers(window,isIFrameWithoutSrc){var document=window.document;!function(e){"use strict";var t,n,r,o,i,a={".js":[],".json":[],".css":[],".html":[]},s="function"==typeof require?require:null;return o=function(e){var t=new Error("Could not find module '"+e+"'");return t.code="MODULE_NOT_FOUND",t},i=function(e,t,n){var r,o;if("function"==typeof e[t+n])return t+n;for(r=0;o=a[n][r];++r)if("function"==typeof e[t+o])return t+o;return null},t=function(e,r,a,s,u,l){var c,d,f,h,p,m;for(a=a.split(/[\\\/]/),c=a.pop(),"."!==c&&".."!==c||(a.push(c),c="");null!=(d=a.shift());)if(d&&"."!==d&&(".."===d?(e=r.pop(),l=l.slice(0,l.lastIndexOf("/"))):(r.push(e),e=e[d],l+="/"+d),!e))throw o(s);if(c&&"function"!=typeof e[c]&&(m=i(e,c,".js"),m||(m=i(e,c,".json")),m||(m=i(e,c,".css")),m||(m=i(e,c,".html")),m?c=m:2!==u&&"object"==typeof e[c]&&(r.push(e),e=e[c],l+="/"+c,c="")),!c)return 1!==u&&e[":mainpath:"]?t(e,r,e[":mainpath:"],s,1,l):t(e,r,"index",s,2,l);if(p=e[c],!p)throw o(s);return p.hasOwnProperty("module")?p.module.exports:(f={},p.module=h={exports:f,id:l+"/"+c},p.call(f,f,h,n(e,r,l)),h.exports)},r=function(n,r,i,a){var u,l=i,c=i.charAt(0),d=0;if("/"===c){if(l=l.slice(1),n=e["/"],!n){if(s)return s(i);throw o(i)}a="/",r=[]}else if("."!==c){if(u=l.split("/",1)[0],n=e[u],!n){if(s)return s(i);throw o(i)}a=u,r=[],l=l.slice(u.length+1),l||(l=n[":mainpath:"],l?d=1:(l="index",d=2))}return t(n,r,l,i,d,a)},(n=function(e,t,n){return function(o){return r(e,[].concat(t),o,n)}})(e,[],"")}({replicator:{":mainpath:":"index.js","index.js":function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="@t",i="@r",a=/^#*@(t|r)$/,s=function(){var e=eval;return e("this")}(),u="function"==typeof ArrayBuffer,l="function"==typeof Map,c="function"==typeof Set,d=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],f=Array.prototype.slice,h={serialize:function(e){return JSON.stringify(e)},deserialize:function(e){return JSON.parse(e)}},p=function(e,t){this.references=e,this.transforms=t,this.circularCandidates=[],this.circularCandidatesDescrs=[],this.circularRefCount=0};p._createRefMark=function(e){var t=Object.create(null);return t[i]=e,t},p.prototype._createCircularCandidate=function(e,t,n){this.circularCandidates.push(e),this.circularCandidatesDescrs.push({parent:t,key:n,refIdx:-1})},p.prototype._applyTransform=function(e,t,n,i){var a=Object.create(null),s=i.toSerializable(e);return"object"===("undefined"==typeof s?"undefined":r(s))&&this._createCircularCandidate(e,t,n),a[o]=i.type,a.data=this._handleValue(s,t,n),a},p.prototype._handleArray=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=this._handleValue(e[n],t,n);return t},p.prototype._handlePlainObject=function(e){var t=Object.create(null);for(var n in e)if(e.hasOwnProperty(n)){var r=a.test(n)?"#"+n:n;t[r]=this._handleValue(e[n],t,r)}return t},p.prototype._handleObject=function(e,t,n){return this._createCircularCandidate(e,t,n),Array.isArray(e)?this._handleArray(e):this._handlePlainObject(e)},p.prototype._ensureCircularReference=function(e){var t=this.circularCandidates.indexOf(e);if(t>-1){var n=this.circularCandidatesDescrs[t];return n.refIdx===-1&&(n.refIdx=n.parent?++this.circularRefCount:0),p._createRefMark(n.refIdx)}return null},p.prototype._handleValue=function(e,t,n){var o="undefined"==typeof e?"undefined":r(e),i="object"===o&&null!==e;if(i){var a=this._ensureCircularReference(e);if(a)return a}for(var s=0;s<this.transforms.length;s++){var u=this.transforms[s];if(u.shouldTransform(o,e))return this._applyTransform(e,t,n,u)}return i?this._handleObject(e,t,n):e},p.prototype.transform=function(){for(var e=[this._handleValue(this.references,null,null)],t=0;t<this.circularCandidatesDescrs.length;t++){var n=this.circularCandidatesDescrs[t];n.refIdx>0&&(e[n.refIdx]=n.parent[n.key],n.parent[n.key]=p._createRefMark(n.refIdx))}return e};var m=function(e,t){this.references=e,this.transformMap=t,this.activeTransformsStack=[],this.visitedRefs=Object.create(null)};m.prototype._handlePlainObject=function(e){var t=Object.create(null);for(var n in e)e.hasOwnProperty(n)&&(this._handleValue(e[n],e,n),a.test(n)&&(t[n.substring(1)]=e[n],delete e[n]));for(var r in t)e[r]=t[r]},m.prototype._handleTransformedObject=function(e,t,n){var r=e[o],i=this.transformMap[r];if(!i)throw new Error("Can't find transform for \""+r+'" type.');this.activeTransformsStack.push(e),this._handleValue(e.data,e,"data"),this.activeTransformsStack.pop(),t[n]=i.fromSerializable(e.data)},m.prototype._handleCircularSelfRefDuringTransform=function(e,t,n){var r=this.references;Object.defineProperty(t,n,{val:void 0,configurable:!0,enumerable:!0,get:function(){return void 0===this.val&&(this.val=r[e]),this.val},set:function(e){this.val=e}})},m.prototype._handleCircularRef=function(e,t,n){this.activeTransformsStack.indexOf(this.references[e])>-1?this._handleCircularSelfRefDuringTransform(e,t,n):(this.visitedRefs[e]||(this.visitedRefs[e]=!0,this._handleValue(this.references[e],this.references,e)),t[n]=this.references[e])},m.prototype._handleValue=function(e,t,n){if("object"===("undefined"==typeof e?"undefined":r(e))&&null!==e){var a=e[i];if(void 0!==a)this._handleCircularRef(a,t,n);else if(e[o])this._handleTransformedObject(e,t,n);else if(Array.isArray(e))for(var s=0;s<e.length;s++)this._handleValue(e[s],e,s);else this._handlePlainObject(e)}},m.prototype.transform=function(){return this.visitedRefs[0]=!0,this._handleValue(this.references[0],this.references,0),this.references[0]};var g=[{type:"[[NaN]]",shouldTransform:function(e,t){return"number"===e&&isNaN(t)},toSerializable:function(){return""},fromSerializable:function(){return NaN}},{type:"[[undefined]]",shouldTransform:function(e){return"undefined"===e},toSerializable:function(){return""},fromSerializable:function(){}},{type:"[[Date]]",shouldTransform:function(e,t){return t instanceof Date},toSerializable:function(e){return e.getTime()},fromSerializable:function(e){var t=new Date;return t.setTime(e),t}},{type:"[[RegExp]]",shouldTransform:function(e,t){return t instanceof RegExp},toSerializable:function(e){var t={src:e.source,flags:""};return e.global&&(t.flags+="g"),e.ignoreCase&&(t.flags+="i"),e.multiline&&(t.flags+="m"),t},fromSerializable:function(e){return new RegExp(e.src,e.flags)}},{type:"[[Error]]",shouldTransform:function(e,t){return t instanceof Error},toSerializable:function(e){return{name:e.name,message:e.message,stack:e.stack}},fromSerializable:function(e){var t=s[e.name]||Error,n=new t(e.message);return n.stack=e.stack,n}},{type:"[[ArrayBuffer]]",shouldTransform:function(e,t){return u&&t instanceof ArrayBuffer},toSerializable:function(e){var t=new Int8Array(e);return f.call(t)},fromSerializable:function(e){if(u){var t=new ArrayBuffer(e.length),n=new Int8Array(t);return n.set(e),t}return e}},{type:"[[TypedArray]]",shouldTransform:function(e,t){for(var n=0;n<d.length;n++){var r=d[n];if("function"==typeof s[r]&&t instanceof s[r])return!0}return!1},toSerializable:function(e){return{ctorName:e.constructor.name,arr:f.call(e)}},fromSerializable:function(e){return"function"==typeof s[e.ctorName]?new s[e.ctorName](e.arr):e.arr}},{type:"[[Map]]",shouldTransform:function(e,t){return l&&t instanceof Map},toSerializable:function(e){var t=[];return e.forEach(function(e,n){t.push(n),t.push(e)}),t},fromSerializable:function(e){if(l){for(var t=new Map,n=0;n<e.length;n+=2)t.set(e[n],e[n+1]);return t}for(var r=[],o=0;o<e.length;o+=2)r.push([e[n],e[n+1]]);return r}},{type:"[[Set]]",shouldTransform:function(e,t){return c&&t instanceof Set},toSerializable:function(e){var t=[];return e.forEach(function(e){t.push(e)}),t},fromSerializable:function(e){if(c){for(var t=new Set,n=0;n<e.length;n++)t.add(e[n]);return t}return e}}],E=t.exports=function(e){this.transforms=[],this.transformsMap=Object.create(null),this.serializer=e||h,this.addTransforms(g)};E.prototype.addTransforms=function(e){e=Array.isArray(e)?e:[e];for(var t=0;t<e.length;t++){var n=e[t];if(this.transformsMap[n.type])throw new Error('Transform with type "'+n.type+'" was already added.');this.transforms.push(n),this.transformsMap[n.type]=n}return this},E.prototype.removeTransforms=function(e){e=Array.isArray(e)?e:[e];for(var t=0;t<e.length;t++){var n=e[t],r=this.transforms.indexOf(n);r>-1&&this.transforms.splice(r,1),delete this.transformsMap[n.type]}return this},E.prototype.encode=function(e){var t=new p(e,this.transforms),n=t.transform();return this.serializer.serialize(n)},E.prototype.decode=function(e){var t=this.serializer.deserialize(e),n=new m(t,this.transformsMap);return n.transform()}}},"testcafe-phoenix":{src:{client:{driver:{"command-executors":{"client-functions":{"client-function-executor.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n("../../deps/hammerhead"),a=n("../../status"),s=r(a),u=n("./replicator"),l=n("./eval-function"),c=r(l),d=n("../../../../errors/test-run"),f=function(){function e(t){o(this,e),this.command=t,this.replicator=this._createReplicator(),this.dependencies=this.replicator.decode(this.command.dependencies),this.fn=(0,c["default"])(this.command.fnCode,this.dependencies)}return e.prototype.getResult=function(){var e=this;return i.Promise.resolve().then(function(){var t=e.replicator.decode(e.command.args);return e._executeFn(t)})["catch"](function(t){throw t.isTestCafeError||(t=new d.UncaughtErrorInClientFunctionCode(e.command.instantiationCallsiteName,t)),t})},e.prototype.getResultDriverStatus=function(){var e=this;return this.getResult().then(function(t){return new s["default"]({isCommandResult:!0,result:e.replicator.encode(t)})})["catch"](function(e){return new s["default"]({isCommandResult:!0,executionError:e})})},e.prototype._createReplicator=function(){return(0,u.createReplicator)([new u.ClientFunctionNodeTransform(this.command.instantiationCallsiteName),new u.FunctionTransform])},e.prototype._executeFn=function(e){return this.fn.apply(window,e)},e}();e["default"]=f,t.exports=e["default"]},"eval-function.js":function(exports,module,require){function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function evalFunction(fnCode,__dependencies$){"use strict";return eval(fnCode)}exports.__esModule=!0,exports["default"]=evalFunction;var _hammerhead=require("../../deps/hammerhead"),_hammerhead2=_interopRequireDefault(_hammerhead),Promise=_hammerhead2["default"].Promise;module.exports=exports["default"]},"replicator.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=new s["default"]({serialize:m,deserialize:m});return t.addTransforms(e)}e.__esModule=!0,e.ClientFunctionNodeTransform=e.SelectorNodeTransform=e.FunctionTransform=void 0,e.createReplicator=i;var a=n("replicator"),s=r(a),u=n("./eval-function"),l=r(u),c=n("./selector-executor/node-snapshots"),d=n("../../../../errors/test-run"),f=n("../../deps/hammerhead"),h=r(f),p=window.Node,m=function(e){return e};e.FunctionTransform=function(){function e(){o(this,e),this.type="Function"}return e.prototype.shouldTransform=function(e){return"function"===e},e.prototype.toSerializable=function(){return""},e.prototype.fromSerializable=function(e){var t=e.fnCode,n=e.dependencies;return(0,l["default"])(t,n)},e}(),e.SelectorNodeTransform=function(){function e(t){o(this,e),this.type="Node",this.customDOMProperties=t||{}}return e.prototype._extend=function(e,t){var n=this;h["default"].nativeMethods.objectKeys.call(window.Object,this.customDOMProperties).forEach(function(r){try{e[r]=n.customDOMProperties[r](t)}catch(o){throw new d.UncaughtErrorInCustomDOMPropertyCode(n.instantiationCallsiteName,o,r)}})},e.prototype.shouldTransform=function(e,t){return t instanceof p},e.prototype.toSerializable=function(e){var t=1===e.nodeType?new c.ElementSnapshot(e):new c.NodeSnapshot(e);return this._extend(t,e),t},e}(),e.ClientFunctionNodeTransform=function(){function e(t){o(this,e),this.type="Node",this.instantiationCallsiteName=t}return e.prototype.shouldTransform=function(e,t){if(t instanceof p)throw new d.DomNodeClientFunctionResultError(this.instantiationCallsiteName)},e}()},"selector-executor":{"filter.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(!l(e))return!1;for(var t=0;t<e.length;t++)if(!(e[t]instanceof c))return!1;return!0}function i(e,t){return t<0?e[e.length+t]:e[t]}var a=n("../../../../../errors/test-run"),s=n("../../../deps/hammerhead"),u=r(s),l=Array.isArray,c=window.Node,d=window.HTMLCollection,f=window.NodeList;u["default"].nativeMethods.objectDefineProperty.call(window,window,"%testCafeSelectorFilter%",{value:function(e,t){var n=[];if(null===e||void 0===e)n=[];else if(e instanceof c)n=[e];else{if(!(e instanceof d||e instanceof f||o(e)))throw new a.InvalidSelectorResultError;n=e}if(t.counterMode)return null!==t.index?i(n,t.index)?1:0:n.length;if(t.collectionMode){if(null!==t.index){var r=i(n,t.index);return r?[r]:[]}return n}return i(n,t.index||0)},configurable:!0})},"index.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return!!e}function u(e){return!(!c.domUtils.isDomElement(e)&&!c.domUtils.isTextNode(e))&&(c.domUtils.isOptionElement(e)||"optgroup"===c.domUtils.getTagName(e)?d.selectElement.isOptionElementVisible(e):c.positionUtils.isElementVisible(e))}e.__esModule=!0;var l=n("../../../deps/hammerhead"),c=n("../../../deps/testcafe-core"),d=n("../../../deps/testcafe-ui"),f=n("../client-function-executor"),h=r(f),p=n("../replicator");n("./filter");var m=200,g=function(e){function t(n,r,a,s,u){o(this,t);var l=i(this,e.call(this,n));if(l.createNotFoundError=s,l.createIsInvisibleError=u,l.timeout="number"==typeof n.timeout?n.timeout:r,l.counterMode=l.dependencies.filterOptions.counterMode,a){var c=new Date-a;l.timeout=Math.max(l.timeout-c,0)}var d=l.dependencies&&l.dependencies.customDOMProperties;return l.replicator.addTransforms([new p.SelectorNodeTransform(d)]),l}return a(t,e),t.prototype._createReplicator=function(){return(0,p.createReplicator)([new p.FunctionTransform])},t.prototype._checkElement=function(e,t,n,r,o){if(n(e))return e;var i=new Date-t>=this.timeout;if(i){if(r)throw r();return null}return(0,c.delay)(m).then(o)},t.prototype._ensureExists=function(e,t){var n=this,r=function(){return n._ensureExists(e,t)};return l.Promise.resolve().then(function(){return n.fn.apply(window,e)}).then(function(e){return n._checkElement(e,t,s,n.createNotFoundError,r)})},t.prototype._ensureVisible=function(e,t){var n=this,r=function(){return n._ensureVisible(e,t)};return this._checkElement(e,t,u,this.createIsInvisibleError,r)},t.prototype._executeFn=function(t){var n=this;if(this.counterMode)return e.prototype._executeFn.call(this,t);var r=new Date,o=null,i=null;return this._ensureExists(t,r).then(function(e){return e&&n.command.visibilityCheck?n._ensureVisible(e,r):e})["catch"](function(e){o=e}).then(function(e){if(o)throw o;i=e}).then(function(){return i})},t}(h["default"]);e["default"]=g,t.exports=e["default"]},"node-snapshots.js":function(e,t,n){function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.ElementSnapshot=e.NodeSnapshot=void 0;var a=n("../../../deps/testcafe-core"),s=n("../../../../../client-functions/selectors/snapshot-properties"),u=n("./sandboxed-node-properties"),l={textContent:u.getTextContent,childNodeCount:function(e){return(0,u.getChildNodes)(e).length},hasChildNodes:function(e){return!!l.childNodeCount(e)},childElementCount:function f(e){var t=(0,u.getChildren)(e);if(t)return t.length;for(var f=0,n=e.childNodes.length,r=0;r<n;r++)1===e.childNodes[r].nodeType&&f++;return f},hasChildElements:function(e){return!!l.childElementCount(e)}},c=e.NodeSnapshot=function(){function e(t){i(this,e),this._initializeProperties(t,s.NODE_SNAPSHOT_PROPERTIES,l)}return e.prototype._initializeProperties=function(e,t,n){for(var r=0;r<t.length;r++){var o=t[r],i=n[o];this[o]=i?i(e):e[o]}},e}(),d={tagName:function(e){return e.tagName.toLowerCase()},visible:a.positionUtils.isElementVisible,focused:function(e){return a.domUtils.getActiveElement()===e},attributes:function(e){for(var t=(0,u.getAttrs)(e),n={},r=t.length-1;r>=0;r--)n[t[r].name]=t[r].value;return n},boundingClientRect:function(e){var t=e.getBoundingClientRect();return{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width,height:t.height}},classNames:function(e){var t=(0,u.getClassName)(e);return t="string"==typeof t.animVal?t.animVal:t,t.replace(/^\s+|\s+$/g,"").split(/\s+/g)},style:function(e){for(var t={},n=window.getComputedStyle(e),r=0;r<n.length;r++){var o=n[r];t[o]=n[o]}return t},innerText:u.getInnerText};e.ElementSnapshot=function(e){function t(n){i(this,t);var o=r(this,e.call(this,n));return o._initializeProperties(n,s.ELEMENT_SNAPSHOT_PROPERTIES,d),o}return o(t,e),t}(c)},"sandboxed-node-properties.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t="("+e.toString()+")";return t=(0,i.processScript)(t,!1),(0,s["default"])(t,null)}e.__esModule=!0,e.getInnerText=e.getClassName=e.getTextContent=e.getChildren=e.getChildNodes=e.getAttrs=void 0;var i=n("../../../deps/hammerhead"),a=n("../eval-function"),s=r(a);e.getAttrs=o(function(e){return e.attributes}),e.getChildNodes=o(function(e){return e.childNodes}),e.getChildren=o(function(e){return e.children}),e.getTextContent=o(function(e){return e.textContent}),e.getClassName=o(function(e){return e.className}),e.getInnerText=o(function(e){return e.innerText})}}},"execute-action.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(!g.domUtils.isEditableElement(e))throw new T.ActionElementNonEditableError}function i(e){if(!g.domUtils.isTextAreaElement(e))throw new T.ActionElementNotTextAreaError}function a(e,t){if(!g.domUtils.isContentEditableElement(e))throw new T.ActionElementNonContentEditableError(t)}function s(e){if(!g.contentEditable.getNearestCommonAncestor(e[0],e[1]))throw new T.ActionRootContainerNotFoundError;return e}function u(e){if(!g.domUtils.isFileInput(e))throw new T.ActionElementIsNotFileInputError}function l(e,t){e.type===b["default"].selectText?o(t[0]):e.type===b["default"].selectTextAreaContent?i(t[0]):e.type===b["default"].selectEditableContent?(a(t[0],"startSelector"),a(t[1],"endSelector"),s(t)):e.type!==b["default"].setFilesToUpload&&e.type!==b["default"].clearUpload||u(t[0])}function c(e,t){var n=[],r=m.Promise.resolve(),o=new Date,i=function(e,i,a,s){r=r.then(function(){var n=new I["default"](e,t,o,i,a);return n.getResult()}).then(function(e){if(!g.domUtils.isDomElement(e))throw s(g.NODE_TYPE_DESCRIPTIONS[e.nodeType]);n.push(e)})};return e.selector&&i(e.selector,function(){return new T.ActionElementNotFoundError},function(){return new T.ActionElementIsInvisibleError},function(e){return new T.ActionSelectorMatchesWrongNodeTypeError(e)}),e.type===b["default"].dragToElement?i(e.destinationSelector,function(){return new T.ActionAdditionalElementNotFoundError("destinationSelector")},function(){return new T.ActionAdditionalElementIsInvisibleError("destinationSelector")},function(e){return new T.ActionAdditionalSelectorMatchesWrongNodeTypeError("destinationSelector",e)}):e.type===b["default"].selectEditableContent&&(i(e.startSelector,function(){return new T.ActionAdditionalElementNotFoundError("startSelector")},function(){return new T.ActionAdditionalElementIsInvisibleError("startSelector")},function(e){return new T.ActionAdditionalSelectorMatchesWrongNodeTypeError("startSelector",e)}),i(e.endSelector||e.startSelector,function(){return new T.ActionAdditionalElementNotFoundError("endSelector")},function(){return new T.ActionAdditionalElementIsInvisibleError("endSelector")},function(e){return new T.ActionAdditionalSelectorMatchesWrongNodeTypeError("endSelector",e)})),r.then(function(){return l(e,n),n})}function d(e){if(e.type===b["default"].pressKey){var t=(0,g.parseKeySequence)(e.keys);if(t.error)throw new T.ActionIncorrectKeysError("keys")}}function f(e,t){var n=(0,y.getOffsetOptions)(e,t.offsetX,t.offsetY),r=n.offsetX,o=n.offsetY;t.offsetX=r,t.offsetY=o}function h(e,t){var n=null;switch(t.options&&"offsetX"in t.options&&"offsetY"in t.options&&f(e[0],t.options),t.type){case b["default"].click:return/option|optgroup/.test(g.domUtils.getTagName(e[0]))?new y.SelectChildClick(e[0],t.options):new y.Click(e[0],t.options);case b["default"].rightClick:return new y.RClick(e[0],t.options);case b["default"].doubleClick:return new y.DblClick(e[0],t.options);case b["default"].hover:return new y.Hover(e[0],t.options);case b["default"].drag:return new y.DragToOffset(e[0],t.dragOffsetX,t.dragOffsetY,t.options);case b["default"].dragToElement:return new y.DragToElement(e[0],e[1],t.options);case b["default"].typeText:return new y.Type(e[0],t.text,t.options);case b["default"].selectText:case b["default"].selectTextAreaContent:return n=(0,y.calculateSelectTextArguments)(e[0],t),new y.SelectText(e[0],n.startPos,n.endPos,t.options);case b["default"].selectEditableContent:return new y.SelectEditableContent(e[0],e[1],t.options);case b["default"].pressKey:return new y.Press((0,g.parseKeySequence)(t.keys).combinations,t.options);case b["default"].setFilesToUpload:return new y.Upload(e[0],t.filePath,function(e){return new T.ActionCanNotFindFileToUploadError(e)});case b["default"].clearUpload:return new y.Upload(e[0])}return null}function p(e,t,n,r){var o=null,i=new m.Promise(function(e){o=e});e.options&&!e.options.speed&&(e.options.speed=r);var a=function(){return e.options&&1!==e.options.speed?(0,g.delay)((1-e.options.speed)*x):m.Promise.resolve()},s=new m.Promise(function(r){function i(r){return c(e,t).then(function(t){var i=h(t,e);return i.TARGET_ELEMENT_FOUND_EVENT?i.on(i.TARGET_ELEMENT_FOUND_EVENT,function(){n.hideWaitingElementStatus(!0),o()}):(n.hideWaitingElementStatus(!0),o()),i.run(r)})["catch"](function(e){var t=Date.now()-s>=E;if(t){if(e.message===y.ERROR_TYPES.foundElementIsNotTarget)return i(!1);throw e.message===y.ERROR_TYPES.elementIsInvisibleError?new T.ActionElementIsInvisibleError:e}return(0,g.delay)(N).then(function(){return i(!0)})})}var s=new Date;try{d(e)}catch(u){return void r(new _["default"]({isCommandResult:!0,executionError:u}))}var l=new g.RequestBarrier,f=new v["default"];g.pageUnloadBarrier.watchForPageNavigationTriggers();var p=e.selector&&"number"==typeof e.selector.timeout,E=p?e.selector.timeout:t;n.showWaitingElementStatus(E),i(!0).then(function(){return m.Promise.all([a(),l.wait().then(function(){return f.wait()}),g.pageUnloadBarrier.wait()])}).then(function(){return r(new _["default"]({isCommandResult:!0}))})["catch"](function(e){return n.hideWaitingElementStatus(!1).then(function(){return r(new _["default"]({isCommandResult:!0,executionError:e}))})})});return{startPromise:i,completionPromise:s}}e.__esModule=!0,e["default"]=p;var m=n("../deps/hammerhead"),g=n("../deps/testcafe-core"),E=n("../script-execution-barrier"),v=r(E),y=n("../deps/testcafe-automation"),w=n("../status"),_=r(w),C=n("./client-functions/selector-executor"),I=r(C),S=n("../../../test-run/commands/type"),b=r(S),T=n("../../../errors/test-run"),x=2e3,N=250;t.exports=e["default"]},"execute-navigate-to.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=new f;return a["default"].navigateTo(e.url),d.all([t.wait(),h.wait()]).then(function(){return new c["default"]({isCommandResult:!0})})["catch"](function(e){return new c["default"]({isCommandResult:!0,executionError:e})})}e.__esModule=!0,e["default"]=o;var i=n("../deps/hammerhead"),a=r(i),s=n("../deps/testcafe-core"),u=r(s),l=n("../status"),c=r(l),d=a["default"].Promise,f=u["default"].RequestBarrier,h=u["default"].pageUnloadBarrier;t.exports=e["default"]},"execute-selector.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n,r,o,i){var a=new s["default"](e,t,n,r,o);return i.showWaitingElementStatus(a.timeout),a.getResult().then(function(e){return i.hideWaitingElementStatus(!!e).then(function(){return e})})["catch"](function(e){return i.hideWaitingElementStatus(!1).then(function(){throw e})})}function i(e,t,n,r,o,i){var a=new s["default"](e,t,n,r,o);return i.showWaitingElementStatus(a.timeout),a.getResultDriverStatus().then(function(e){return i.hideWaitingElementStatus(!!e.result).then(function(){return e})})}e.__esModule=!0,e.getResult=o,e.getResultDriverStatus=i;var a=n("./client-functions/selector-executor"),s=r(a)},"prepare-browser-manipulation.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=null,t={cmd:l["default"].readyForBrowserManipulation,innerWidth:window.innerWidth,innerHeight:window.innerHeight,disableResending:!0};return(0,s.hide)(),i.transport.queuedAsyncServiceMsg(t).then(function(t){return e=t,(0,s.show)(),(0,a.delay)(f)}).then(function(){return new d["default"]({isCommandResult:!0,result:e})})}e.__esModule=!0,e["default"]=o;var i=n("../deps/hammerhead"),a=n("../deps/testcafe-core"),s=n("../deps/testcafe-ui"),u=n("../../../test-run/client-messages"),l=r(u),c=n("../status"),d=r(c),f=100;t.exports=e["default"]}},deps:{"hammerhead.js":function(e,t,n){e.__esModule=!0,e["default"]=window["%hammerhead%"],t.exports=e["default"]},"testcafe-automation.js":function(e,t,n){e.__esModule=!0,e["default"]=window["%testCafeAutomation%"],t.exports=e["default"]},"testcafe-core.js":function(e,t,n){e.__esModule=!0,e["default"]=window["%testCafeCore%"],t.exports=e["default"]},"testcafe-ui.js":function(e,t,n){e.__esModule=!0,e["default"]=window["%testCafeUI%"],t.exports=e["default"]}},"driver-link":{"child.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n("../deps/hammerhead"),s=n("../deps/testcafe-core"),u=n("../../../errors/test-run"),l=n("./send-message-to-driver"),c=r(l),d=n("./messages"),f=n("../status"),h=r(f),p=1e3,m=200,g=500,E=function(){function e(t,n){o(this,e),this.driverWindow=t,this.driverIframe=s.domUtils.findIframeByWindow(t),this.driverId=n,this.iframeAvailabilityTimeout=0}return e.prototype._ensureIframe=function(){var e=this;return s.domUtils.isElementInDocument(this.driverIframe)?(0,s.waitFor)(function(){return s.positionUtils.isElementVisible(e.driverIframe)?e.driverIframe:null},m,this.iframeAvailabilityTimeout)["catch"](function(){throw new u.CurrentIframeIsInvisibleError}):a.Promise.reject(new u.CurrentIframeNotFoundError)},e.prototype._waitForIframeRemovedOrHidden=function(){var e=this;return new a.Promise(function(t){e.checkIframeInterval=a.nativeMethods.setInterval.call(window,function(){e._ensureIframe()["catch"](function(){return(0,s.delay)(g).then(function(){return t(new h["default"]({isCommandResult:!0}))})})},p)})},e.prototype._waitForCommandResult=function(){var e=this,t=null,n=function(){return new a.Promise(function(e){t=function(t){t.message.type===d.TYPE.commandExecuted&&e(t.message.driverStatus)},a.eventSandbox.message.on(a.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,t)})};return a.Promise.race([this._waitForIframeRemovedOrHidden(),n()]).then(function(n){return a.eventSandbox.message.off(a.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,t),a.nativeMethods.clearInterval.call(window,e.checkIframeInterval),n})},e.prototype.confirmConnectionEstablished=function(e){var t=new d.ConfirmationMessage(e,{id:this.driverId});a.eventSandbox.message.sendServiceMsg(t,this.driverWindow)},e.prototype.executeCommand=function(e,t){var n=this;return this._ensureIframe().then(function(){var r=new d.ExecuteCommandMessage(e,t);return a.Promise.all([(0,c["default"])(r,n.driverWindow,n.iframeAvailabilityTimeout,u.CurrentIframeIsNotLoadedError),n._waitForCommandResult()])}).then(function(e){return e[1]})},i(e,[{key:"availabilityTimeout",set:function(e){this.iframeAvailabilityTimeout=e}}]),e}();e["default"]=E,t.exports=e["default"]},"messages.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.SetNativeDialogHandlerMessage=e.ConfirmationMessage=e.ExecuteCommandMessage=e.CommandExecutedMessage=e.EstablishConnectionMessage=e.TYPE=void 0;var s=n("../generate-id"),u=r(s),l=e.TYPE={establishConnection:"driver|establish-connection",commandExecuted:"driver|command-executed",executeCommand:"driver|execute-command",confirmation:"driver|confirmation",setNativeDialogHandler:"driver|set-native-dialog-handler"},c=function d(e){a(this,d),this.type=e,this.id=(0,u["default"])()};e.EstablishConnectionMessage=function(e){function t(){return a(this,t),o(this,e.call(this,l.establishConnection))}return i(t,e),t}(c),e.CommandExecutedMessage=function(e){function t(n){a(this,t);var r=o(this,e.call(this,l.commandExecuted));return r.driverStatus=n,r}return i(t,e),t}(c),e.ExecuteCommandMessage=function(e){function t(n,r){a(this,t);var i=o(this,e.call(this,l.executeCommand));return i.command=n,i.testSpeed=r,i}return i(t,e),t}(c),e.ConfirmationMessage=function(e){function t(n,r){a(this,t);var i=o(this,e.call(this,l.confirmation));return i.requestMessageId=n,i.result=r,i}return i(t,e),t}(c),e.SetNativeDialogHandlerMessage=function(e){function t(n){a(this,t);var r=o(this,e.call(this,l.setNativeDialogHandler));return r.dialogHandler=n,r}return i(t,e),t}(c)},"parent.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n("../deps/hammerhead"),a=n("./messages"),s=n("../../../errors/test-run"),u=n("./send-message-to-driver"),l=r(u),c=5e3,d=function(){function e(t){o(this,e),this.driverWindow=t}return e.prototype.establishConnection=function(){var e=new a.EstablishConnectionMessage;return(0,l["default"])(e,this.driverWindow,c,s.CurrentIframeIsNotLoadedError).then(function(e){
return e.result.id})},e.prototype.confirmMessageReceived=function(e){var t=new a.ConfirmationMessage(e);i.eventSandbox.message.sendServiceMsg(t,this.driverWindow)},e.prototype.onCommandExecuted=function(e){var t=new a.CommandExecutedMessage(e);i.eventSandbox.message.sendServiceMsg(t,this.driverWindow)},e}();e["default"]=d,t.exports=e["default"]},"send-message-to-driver.js":function(e,t,n){function r(e,t,n,r){var l=null,c=null,d=null;n=Math.max(n||0,s);var f=function(){return new o.Promise(function(n){d=function(t){t.message.type===a.TYPE.confirmation&&t.message.requestMessageId===e.id&&n(t.message)},o.eventSandbox.message.on(o.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,d),l=o.nativeMethods.setInterval.call(window,function(){return o.eventSandbox.message.sendServiceMsg(e,t)},u),o.eventSandbox.message.sendServiceMsg(e,t)})};return o.Promise.race([(0,i.delay)(n),f()]).then(function(e){if(o.nativeMethods.clearInterval.call(window,l),o.nativeMethods.clearTimeout.call(window,c),o.eventSandbox.message.off(o.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,d),!e)throw new r;return e})}e.__esModule=!0,e["default"]=r;var o=n("../deps/hammerhead"),i=n("../deps/testcafe-core"),a=n("./messages"),s=2500,u=1e3;t.exports=e["default"]}},"driver.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n("./deps/hammerhead"),s=r(a),u=n("./deps/testcafe-core"),l=n("./deps/testcafe-ui"),c=n("../../test-run/client-messages"),d=r(c),f=n("../../test-run/commands/type"),h=r(f),p=n("../../test-run/commands/utils"),m=n("../../errors/test-run"),g=n("../../test-run/browser-console-messages"),E=r(g),v=n("./native-dialog-tracker"),y=r(v),w=n("./driver-link/messages"),_=n("./storage"),C=r(_),I=n("./status"),S=r(I),b=n("./generate-id"),T=r(b),x=n("./driver-link/child"),N=r(x),A=n("./command-executors/prepare-browser-manipulation"),M=r(A),R=n("./command-executors/execute-action"),D=r(R),O=n("./command-executors/execute-navigate-to"),F=r(O),P=n("./command-executors/execute-selector"),j=n("./command-executors/client-functions/client-function-executor"),k=r(j),U=s["default"].transport,L=s["default"].Promise,H=s["default"].eventSandbox.message,W=s["default"].storages,B="testcafe|driver|test-done-sent-flag",V="testcafe|driver|pending-status",z="testcafe|driver|executing-client-function-descriptor",G="testcafe|driver|selector-execution-start-time",X="testcafe|driver|pending-page-error",K="testcafe|driver|active-iframe-selector",q="testcafe|driver|test-speed",Y="testcafe|driver|assertion-retries-timeout",J="testcafe|driver|assertion-retries-start-time",$="testcafe|driver|console-messages",Q=500,Z={NotLoadedError:m.ActionIframeIsNotLoadedError,NotFoundError:m.ActionElementNotFoundError,IsInvisibleError:m.ActionElementIsInvisibleError},ee={NotLoadedError:m.CurrentIframeIsNotLoadedError,NotFoundError:m.CurrentIframeNotFoundError,IsInvisibleError:m.CurrentIframeIsInvisibleError},te=function(){function e(t,n,r,i){var a=this;o(this,e),this.COMMAND_EXECUTING_FLAG="testcafe|driver|command-executing-flag",this.EXECUTING_IN_IFRAME_FLAG="testcafe|driver|executing-in-iframe-flag",this.testRunId=t,this.heartbeatUrl=n.heartbeat,this.browserStatusUrl=n.status,this.userAgent=r.userAgent,this.fixtureName=r.fixtureName,this.testName=r.testName,this.selectorTimeout=i.selectorTimeout,this.pageLoadTimeout=i.pageLoadTimeout,this.initialSpeed=i.speed,this.skipJsErrors=i.skipJsErrors,this.dialogHandler=i.dialogHandler,this.customCommandHandlers={},this.contextStorage=null,this.nativeDialogsTracker=null,this.childDriverLinks=[],this.activeChildDriverLink=null,this.statusBar=null,this.pageInitialRequestBarrier=new u.RequestBarrier,this.readyPromise=u.eventUtils.documentReady(this.pageLoadTimeout).then(function(){return a.pageInitialRequestBarrier.wait(!0)}),this._initChildDriverListening(),u.pageUnloadBarrier.init(),(0,u.preventRealEvents)(),s["default"].on(s["default"].EVENTS.uncaughtJsError,function(e){return a._onJsError(e)}),s["default"].on(s["default"].EVENTS.unhandledRejection,function(e){return a._onJsError(e)}),s["default"].on(s["default"].EVENTS.consoleMethCalled,function(e){return a._onConsoleMessage(e)})}return e.prototype._onJsError=function(e){if(this.skipJsErrors||this.contextStorage.getItem(B))return L.resolve();var t=new m.UncaughtErrorOnPage(e.msg||e.message,e.pageUrl);return this.contextStorage.getItem(X)||this.contextStorage.setItem(X,t),null},e.prototype._failIfClientCodeExecutionIsInterrupted=function(){var e=this.contextStorage.getItem(z);return!!e&&(this._onReady(new S["default"]({isCommandResult:!0,executionError:new m.ClientFunctionExecutionInterruptionError(e.instantiationCallsiteName)})),!0)},e.prototype._onConsoleMessage=function(e){var t=e.meth,n=e.args.map(function(e){return null===e?"null":void 0===e?"undefined":e.toString()}),r=this.consoleMessages;r.addMessage(t,Array.prototype.slice.call(n).join(" ")),this.consoleMessages=r},e.prototype._addPendingErrorToStatus=function(e){var t=this.contextStorage.getItem(X);t&&(this.contextStorage.setItem(X,null),e.pageError=t)},e.prototype._addUnexpectedDialogErrorToStatus=function(e){var t=this.nativeDialogsTracker.getUnexpectedDialogError();e.pageError=e.pageError||t},e.prototype._addConsoleMessagesToStatus=function(e){e.consoleMessages=this.consoleMessages,this.consoleMessages=null},e.prototype._sendStatus=function(e){var t=this;e.resent||(this._addPendingErrorToStatus(e),this._addUnexpectedDialogErrorToStatus(e),this._addConsoleMessagesToStatus(e)),this.contextStorage.setItem(V,e);var n=null;return u.pageUnloadBarrier.wait(0).then(function(){return U.queuedAsyncServiceMsg({cmd:d["default"].ready,status:e,disableResending:!0})}).then(function(e){return n=e,u.pageUnloadBarrier.wait(0)}).then(function(){return t.contextStorage.setItem(V,null),n})},e.prototype._initChildDriverListening=function(){var e=this;H.on(H.SERVICE_MSG_RECEIVED_EVENT,function(t){var n=t.message,r=t.source;if(n.type===w.TYPE.establishConnection){var o=e._getChildDriverLinkByWindow(r);if(!o){var i=e.testRunId+"-"+(0,T["default"])();o=new N["default"](r,i),e.childDriverLinks.push(o)}o.confirmConnectionEstablished(n.id)}})},e.prototype._getChildDriverLinkByWindow=function(e){return this.childDriverLinks.filter(function(t){return t.driverWindow===e})[0]},e.prototype._runInActiveIframe=function(e){var t=this,n=L.resolve(),r=this.contextStorage.getItem(K);!this.activeChildDriverLink&&r&&(n=this._switchToIframe(r,ee)),n.then(function(){return t.contextStorage.setItem(t.EXECUTING_IN_IFRAME_FLAG,!0),t.activeChildDriverLink.executeCommand(e,t.speed)}).then(function(e){return t._onCommandExecutedInIframe(e)})["catch"](function(e){return t._onCommandExecutedInIframe(new S["default"]({isCommandResult:!0,executionError:e}))})},e.prototype._onCommandExecutedInIframe=function(e){this.contextStorage.setItem(this.EXECUTING_IN_IFRAME_FLAG,!1),this._onReady(e)},e.prototype._ensureChildDriverLink=function(e,t,n){var r=this;return(0,u.waitFor)(function(){return r._getChildDriverLinkByWindow(e)},Q,n)["catch"](function(){throw new t})},e.prototype._switchToIframe=function(e,t){var n=this,r="number"==typeof e.timeout,o=r?e.timeout:this.selectorTimeout;return(0,P.getResult)(e,o,null,function(){return new t.NotFoundError},function(){return t.IsInvisibleError()},this.statusBar).then(function(e){if(!u.domUtils.isIframeElement(e))throw new m.ActionElementNotIframeError;return n._ensureChildDriverLink(e.contentWindow,t.NotLoadedError,o)}).then(function(t){t.availabilityTimeout=o,n.activeChildDriverLink=t,n.contextStorage.setItem(K,e)})},e.prototype._switchToMainWindow=function(e){this.activeChildDriverLink&&this.activeChildDriverLink.executeCommand(e),this.contextStorage.setItem(K,null),this.activeChildDriverLink=null},e.prototype._setNativeDialogHandlerInIframes=function(e){for(var t=new w.SetNativeDialogHandlerMessage(e),n=0;n<this.childDriverLinks.length;n++)H.sendServiceMsg(t,this.childDriverLinks[n].driverWindow)},e.prototype._onActionCommand=function(e){var t=this,n=(0,D["default"])(e,this.selectorTimeout,this.statusBar,this.speed),r=n.startPromise,o=n.completionPromise;r.then(function(){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!0)}),o.then(function(e){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!1),t._onReady(e)})},e.prototype._onSetNativeDialogHandlerCommand=function(e){this.nativeDialogsTracker.setHandler(e.dialogHandler),this._setNativeDialogHandlerInIframes(e.dialogHandler),this._onReady(new S["default"]({isCommandResult:!0}))},e.prototype._onGetNativeDialogHistoryCommand=function(){this._onReady(new S["default"]({isCommandResult:!0,result:this.nativeDialogsTracker.appearedDialogs}))},e.prototype._onGetBrowserConsoleMessagesCommand=function(){this._onReady(new S["default"]({isCommandResult:!0}))},e.prototype._onNavigateToCommand=function(e){var t=this;this.contextStorage.setItem(this.COMMAND_EXECUTING_FLAG,!0),(0,F["default"])(e).then(function(e){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!1),t._onReady(e)})},e.prototype._onExecuteClientFunctionCommand=function(e){var t=this;this.contextStorage.setItem(z,{instantiationCallsiteName:e.instantiationCallsiteName});var n=new k["default"](e);n.getResultDriverStatus().then(function(e){t.contextStorage.setItem(z,null),t._onReady(e)})},e.prototype._onExecuteSelectorCommand=function(e){var t=this,n=this.contextStorage.getItem(G)||new Date;(0,P.getResultDriverStatus)(e,this.selectorTimeout,n,null,null,this.statusBar).then(function(e){t.contextStorage.setItem(G,null),t._onReady(e)})},e.prototype._onSwitchToMainWindowCommand=function(e){this._switchToMainWindow(e),this._onReady(new S["default"]({isCommandResult:!0}))},e.prototype._onSwitchToIframeCommand=function(e){var t=this;this._switchToIframe(e.selector,Z).then(function(){return t._onReady(new S["default"]({isCommandResult:!0}))})["catch"](function(e){return t._onReady(new S["default"]({isCommandResult:!0,executionError:e}))})},e.prototype._onPrepareBrowserManipulationCommand=function(){var e=this;this.contextStorage.setItem(this.COMMAND_EXECUTING_FLAG,!0),(0,M["default"])().then(function(t){return e.contextStorage.setItem(e.COMMAND_EXECUTING_FLAG,!1),e._onReady(t)})},e.prototype._onSetBreakpointCommand=function(e){var t=this;this.statusBar.showDebuggingStatus(e).then(function(e){return t._onReady(new S["default"]({isCommandResult:!0,result:e}))})},e.prototype._onSetTestSpeedCommand=function(e){this.speed=e.speed,this._onReady(new S["default"]({isCommandResult:!0}))},e.prototype._onShowAssertionRetriesStatusCommand=function(e){this.contextStorage.setItem(Y,e.timeout),this.contextStorage.setItem(J,Date.now()),this.statusBar.showWaitingAssertionRetriesStatus(e.timeout),this._onReady(new S["default"]({isCommandResult:!0}))},e.prototype._onHideAssertionRetriesStatusCommand=function(e){var t=this;this.contextStorage.setItem(Y,null),this.contextStorage.setItem(J,null),this.statusBar.hideWaitingAssertionRetriesStatus(e.success).then(function(){return t._onReady(new S["default"]({isCommandResult:!0}))})},e.prototype._onCustomCommand=function(e){var t=this,n=this.customCommandHandlers[e.type];n(e).then(function(e){t._onReady(new S["default"]({isCommandResult:!0,result:e}))})},e.prototype._onTestDone=function(e){var t=this;this.contextStorage.setItem(B,!0),W.clear(),W.lock(),this._sendStatus(e).then(function(){return u.browser.checkStatus(t.browserStatusUrl,s["default"].createNativeXHR)})},e.prototype._onBackupStoragesCommand=function(){this._onReady(new S["default"]({isCommandResult:!0,result:W.backup()}))},e.prototype._onReady=function(e){var t=this;this._sendStatus(e).then(function(e){e?t._onCommand(e):t._onReady(new S["default"])})},e.prototype._executeCommand=function(e){this.customCommandHandlers[e.type]?this._onCustomCommand(e):e.type===h["default"].testDone?this._onTestDone(new S["default"]({isCommandResult:!0})):e.type===h["default"].setBreakpoint?this._onSetBreakpointCommand(e.isTestError):e.type===h["default"].prepareBrowserManipulation?this._onPrepareBrowserManipulationCommand():e.type===h["default"].switchToMainWindow?this._onSwitchToMainWindowCommand(e):e.type===h["default"].switchToIframe?this._onSwitchToIframeCommand(e):e.type===h["default"].executeClientFunction?this._onExecuteClientFunctionCommand(e):e.type===h["default"].executeSelector?this._onExecuteSelectorCommand(e):e.type===h["default"].navigateTo?this._onNavigateToCommand(e):e.type===h["default"].setNativeDialogHandler?this._onSetNativeDialogHandlerCommand(e):e.type===h["default"].getNativeDialogHistory?this._onGetNativeDialogHistoryCommand(e):e.type===h["default"].getBrowserConsoleMessages?this._onGetBrowserConsoleMessagesCommand(e):e.type===h["default"].setTestSpeed?this._onSetTestSpeedCommand(e):e.type===h["default"].showAssertionRetriesStatus?this._onShowAssertionRetriesStatusCommand(e):e.type===h["default"].hideAssertionRetriesStatus?this._onHideAssertionRetriesStatusCommand(e):e.type===h["default"].backupStorages?this._onBackupStoragesCommand():this._onActionCommand(e)},e.prototype._onCommand=function(e){var t=this;this.readyPromise.then(function(){var n=(0,p.isCommandRejectableByPageError)(e),r=t.contextStorage.getItem(X);if(r&&n)return void t._onReady(new S["default"]({isCommandResult:!0}));var o=t.activeChildDriverLink||t.contextStorage.getItem(K);return!(0,p.isExecutableInTopWindowOnly)(e)&&o?void t._runInActiveIframe(e):void t._executeCommand(e)})},e.prototype.setCustomCommandHandlers=function(e,t){this.customCommandHandlers[e]=t},e.prototype.start=function(){var e=this;this.contextStorage=new C["default"](window,this.testRunId),this.nativeDialogsTracker=new y["default"](this.contextStorage,this.dialogHandler),this.speed||(this.speed=this.initialSpeed),u.browser.startHeartbeat(this.heartbeatUrl,s["default"].createNativeXHR),this.statusBar=new l.StatusBar(this.userAgent,this.fixtureName,this.testName),this.statusBar.on(this.statusBar.UNLOCK_PAGE_BTN_CLICK,u.disableRealEventsPreventing),this.readyPromise.then(function(){e.statusBar.hidePageLoadingStatus();var t=e.contextStorage.getItem(Y);if(t){var n=e.contextStorage.getItem(J),r=t-(new Date-n);r>0&&e.statusBar.showWaitingAssertionRetriesStatus(t,n)}});var t=this.contextStorage.getItem(V);if(t&&(t.resent=!0),this.contextStorage.getItem(B))return void(t?this._onTestDone(t):u.browser.checkStatus(this.browserStatusUrl,s["default"].createNativeXHR));if(!this._failIfClientCodeExecutionIsInterrupted()){var n=this.contextStorage.getItem(this.COMMAND_EXECUTING_FLAG)||this.contextStorage.getItem(this.EXECUTING_IN_IFRAME_FLAG),r=t||new S["default"]({isCommandResult:n});this.contextStorage.setItem(this.COMMAND_EXECUTING_FLAG,!1),this.contextStorage.setItem(this.EXECUTING_IN_IFRAME_FLAG,!1),this._onReady(r)}},i(e,[{key:"speed",set:function(e){this.contextStorage.setItem(q,e)},get:function(){return this.contextStorage.getItem(q)}},{key:"consoleMessages",get:function(){return new E["default"](this.contextStorage.getItem($))},set:function(e){return this.contextStorage.setItem($,e?e.getCopy():null)}}]),e}();e["default"]=te,t.exports=e["default"]},"embedding-utils.js":function(e,t,n){e.__esModule=!0;var r=n("./command-executors/client-functions/selector-executor/node-snapshots");e["default"]={NodeSnapshot:r.NodeSnapshot,ElementSnapshot:r.ElementSnapshot},t.exports=e["default"]},"generate-id.js":function(e,t,n){e.__esModule=!0,e["default"]=function(){return"function"==typeof r.nativeMethods.performanceNow?r.nativeMethods.performanceNow().toString():(r.nativeMethods.dateNow()+Math.random()).toString()};var r=n("./deps/hammerhead");t.exports=e["default"]},"iframe-driver.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var s=n("./deps/hammerhead"),u=n("./deps/testcafe-core"),l=n("./deps/testcafe-ui"),c=n("./driver"),d=r(c),f=n("./storage"),h=r(f),p=n("./status"),m=r(p),g=n("./driver-link/parent"),E=r(g),v=n("./driver-link/messages"),y=n("./native-dialog-tracker/iframe"),w=r(y),_=function(e){function t(n,r){o(this,t);var a=i(this,e.call(this,n,{},{},r));return a.lastParentDriverMessageId=null,a.parentDriverLink=new E["default"](window.parent),a._initParentDriverListening(),a}return a(t,e),t.prototype._onJsError=function(){},t.prototype._onConsoleMessage=function(){},t.prototype._initParentDriverListening=function(){var e=this;s.eventSandbox.message.on(s.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,function(t){var n=t.message;u.pageUnloadBarrier.wait(0).then(function(){if(n.type===v.TYPE.executeCommand){if(e.lastParentDriverMessageId===n.id)return;e.lastParentDriverMessageId=n.id,e.readyPromise.then(function(){e.speed=n.testSpeed,e.parentDriverLink.confirmMessageReceived(n.id),e._onCommand(n.command)})}n.type===v.TYPE.setNativeDialogHandler&&(e.nativeDialogsTracker.setHandler(n.dialogHandler),e._setNativeDialogHandlerInIframes(n.dialogHandler))})})},t.prototype._onSwitchToMainWindowCommand=function(e){this._switchToMainWindow(e)},t.prototype._onReady=function(e){this.parentDriverLink.onCommandExecuted(e)},t.prototype.start=function(){var e=this;this.nativeDialogsTracker=new w["default"](this.dialogHandler),this.statusBar=new l.IframeStatusBar;var t=this.parentDriverLink.establishConnection().then(function(t){if(e.contextStorage=new h["default"](window,t),!e._failIfClientCodeExecutionIsInterrupted()){var n=e.contextStorage.getItem(e.COMMAND_EXECUTING_FLAG)||e.contextStorage.getItem(e.EXECUTING_IN_IFRAME_FLAG);n&&(e.contextStorage.setItem(e.COMMAND_EXECUTING_FLAG,!1),e.contextStorage.setItem(e.EXECUTING_IN_IFRAME_FLAG,!1),e._onReady(new m["default"]({isCommandResult:!0})))}});this.readyPromise=s.Promise.all([this.readyPromise,t])},t}(d["default"]);e["default"]=_,t.exports=e["default"]},"index.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}var o=n("./deps/hammerhead"),i=r(o),a=n("./driver"),s=r(a),u=n("./iframe-driver"),l=r(u),c=n("./script-execution-barrier"),d=r(c),f=n("./embedding-utils"),h=r(f);i["default"].nativeMethods.objectDefineProperty.call(window,window,"%testCafeDriver%",{configurable:!0,value:s["default"]}),i["default"].nativeMethods.objectDefineProperty.call(window,window,"%testCafeIframeDriver%",{configurable:!0,value:l["default"]}),i["default"].nativeMethods.objectDefineProperty.call(window,window,"%ScriptExecutionBarrier%",{configurable:!0,value:d["default"]}),i["default"].nativeMethods.objectDefineProperty.call(window,window,"%testCafeEmbeddingUtils%",{configurable:!0,value:h["default"]}),i["default"].on(i["default"].EVENTS.evalIframeScript,function(e){return initTestCafeClientDrivers(e.iframe.contentWindow,!0)})},"native-dialog-tracker":{"iframe.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var s=n("../deps/hammerhead"),u=r(s),l=n("./messages"),c=r(l),d=n("./index"),f=r(d),h=u["default"].eventSandbox.message,p=function(e){function t(n){return o(this,t),i(this,e.call(this,null,n))}return a(t,e),t.prototype._defaultDialogHandler=function(e){h.sendServiceMsg({type:c["default"].unexpectedDialog,dialogType:e,url:f["default"]._getPageUrl()},window.top)},t.prototype._addAppearedDialogs=function(e,t){h.sendServiceMsg({type:c["default"].appearedDialog,dialogType:e,text:t,url:f["default"]._getPageUrl()},window.top)},t.prototype._onHandlerError=function(e,t){h.sendServiceMsg({type:c["default"].handlerError,dialogType:e,message:t,url:f["default"]._getPageUrl()},window.top)},t}(f["default"]);e["default"]=p,t.exports=e["default"]},"index.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n("../deps/hammerhead"),s=r(a),u=n("../../../errors/test-run"),l=n("../command-executors/client-functions/client-function-executor"),c=r(l),d=n("./messages"),f=r(d),h=s["default"].eventSandbox.message,p=s["default"].processScript,m=s["default"].nativeMethods,g="testcafe|native-dialog-tracker|appeared-dialogs",E="testcafe|native-dialog-tracker|unexpected-dialog",v="testcafe|native-dialog-tracker|error-in-handler",y=p("window.location.href"),w=function(){function e(t,n){o(this,e),this.contextStorage=t,this.dialogHandler=n,this._init(),this._initListening(),this.dialogHandler&&this.setHandler(n)}return e._getPageUrl=function(){return m.eval(y)},e.prototype._initListening=function(){var e=this;h.on(h.SERVICE_MSG_RECEIVED_EVENT,function(t){var n=t.message;n.type===f["default"].appearedDialog?e._addAppearedDialogs(n.dialogType,n.text,n.url):n.type!==f["default"].unexpectedDialog||e.unexpectedDialog?n.type!==f["default"].handlerError||e.handlerError||e._onHandlerError(n.dialogType,n.message,n.url):e.unexpectedDialog={type:n.dialogType,url:n.url}})},e.prototype._init=function(){var e=this;s["default"].on(s["default"].EVENTS.beforeUnload,function(t){if(t.prevented&&!t.isFakeIEEvent)if(e.dialogHandler){var n=e._createDialogHandler("beforeunload");n(t.returnValue||"")}else e._defaultDialogHandler("beforeunload");e.contextStorage&&e.contextStorage.save()}),window.alert=function(){return e._defaultDialogHandler("alert")},window.confirm=function(){return e._defaultDialogHandler("confirm")},window.prompt=function(){return e._defaultDialogHandler("prompt")}},e.prototype._createDialogHandler=function(t){var n=this;return function(r){var o=e._getPageUrl();n._addAppearedDialogs(t,r,o);var i=new c["default"](n.dialogHandler),a=null;try{a=i.fn.apply(window,[t,r,o])}catch(s){n._onHandlerError(t,s.message||String(s),o)}return a}},e.prototype._defaultDialogHandler=function(t){var n=e._getPageUrl();this.unexpectedDialog=this.unexpectedDialog||{type:t,url:n}},e.prototype._addAppearedDialogs=function(e,t,n){this.appearedDialogs.splice(0,0,{type:e,text:t,url:n})},e.prototype._onHandlerError=function(e,t,n){this.handlerError=this.handlerError||{type:e,message:t,url:n}},e.prototype.setHandler=function(e){var t=this;this.dialogHandler=e,["alert","confirm","prompt"].forEach(function(e){window[e]=t.dialogHandler?t._createDialogHandler(e):function(){return t._defaultDialogHandler(e)}})},e.prototype.getUnexpectedDialogError=function(){var e=this.unexpectedDialog,t=this.handlerError;return this.unexpectedDialog=null,this.handlerError=null,e?new u.NativeDialogNotHandledError(e.type,e.url):t?new u.UncaughtErrorInNativeDialogHandler(t.type,t.message,t.url):null},i(e,[{key:"appearedDialogs",get:function(){var e=this.contextStorage.getItem(g);return e||(e=[],this.appearedDialogs=e),e},set:function(e){this.contextStorage.setItem(g,e)}},{key:"unexpectedDialog",get:function(){return this.contextStorage.getItem(E)},set:function(e){this.contextStorage.setItem(E,e)}},{key:"handlerError",get:function(){return this.contextStorage.getItem(v)},set:function(e){this.contextStorage.setItem(v,e)}}]),e}();e["default"]=w,t.exports=e["default"]},"messages.js":function(e,t,n){e.__esModule=!0,e["default"]={appearedDialog:"appeared-dialog",unexpectedDialog:"unexpected-dialog",handlerError:"handler-error"},t.exports=e["default"]}},"script-execution-barrier.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n("./deps/hammerhead"),a=r(i),s=n("./deps/testcafe-core"),u=a["default"].Promise,l=a["default"].nativeMethods,c=25,d=function(){function e(){var t=this;o(this,e),this.watchdog=null,this.SCRIPT_LOADING_TIMEOUT=2e3,this.BARRIER_TIMEOUT=3e3,this.scriptsCount=0,this.resolveWaitingPromise=null,this.scriptElementAddedHandler=function(e){return t._onScriptElementAdded(e.el)},a["default"].on(a["default"].EVENTS.scriptElementAdded,this.scriptElementAddedHandler)}return e.prototype._onScriptElementAdded=function(e){var t=this;if(void 0!==e.src&&""!==e.src){this.scriptsCount++;var n=null,r=function o(){l.removeEventListener.call(e,"load",o),l.removeEventListener.call(e,"error",o),l.clearTimeout.call(window,n),t._onScriptLoadedOrFailed()};l.addEventListener.call(e,"load",r),l.addEventListener.call(e,"error",r),n=l.setTimeout.call(window,r,this.SCRIPT_LOADING_TIMEOUT)}},e.prototype._onScriptLoadedOrFailed=function(){var e=this;this.scriptsCount--,this.scriptsCount||(0,s.delay)(c).then(function(){e.resolveWaitingPromise&&(e.scriptsCount||e.resolveWaitingPromise())})},e.prototype.wait=function(){var e=this;return new u(function(t){var n=function(){l.clearTimeout.call(window,e.watchdog),a["default"].off(a["default"].EVENTS.scriptElementAdded,e.scriptElementAddedHandler),e.watchdog=null,e.resolveWaitingPromise=null,t()};e.scriptsCount?(e.watchdog=l.setTimeout.call(window,function(){return n()},e.BARRIER_TIMEOUT),e.resolveWaitingPromise=function(){return n()}):n()})},e}();e["default"]=d,t.exports=e["default"]},"status.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var s=n("../../utils/assignable"),u=r(s),l=n("./generate-id"),c=r(l),d=function(e){function t(n){o(this,t);var r=i(this,e.call(this,n));return r.id=(0,c["default"])(),r.isCommandResult=!1,r.executionError=null,r.pageError=null,r.resent=!1,r.result=null,r.consoleMessages=null,r._assignFrom(n,!0),r}return a(t,e),t.prototype._getAssignableProperties=function(){return[{name:"isCommandResult"},{name:"executionError"},{name:"pageError"},{name:"result"},{name:"consoleMessages"}]},t}(u["default"]);e["default"]=d,t.exports=e["default"]},"storage.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n("./deps/hammerhead"),a=r(i),s=a["default"].json,u="testcafe|driver|",l=function(){function e(t,n){o(this,e),this.storage=t.sessionStorage,this.storageKey=u+n,this.data={},this._loadFromStorage()}return e.prototype._loadFromStorage=function(){var e=this.storage.getItem(this.storageKey);e&&(this.data=s.parse(e),this.storage.removeItem(this.storageKey))},e.prototype.save=function(){this.storage.setItem(this.storageKey,s.stringify(this.data))},e.prototype.setItem=function(e,t){this.data[e]=t,this.save()},e.prototype.getItem=function(e){return this.data[e]},e.prototype.dispose=function(){this.storage.removeItem(this.storageKey)},e}();e["default"]=l,t.exports=e["default"]}}},"client-functions":{selectors:{"snapshot-properties.js":function(e,t,n){e.__esModule=!0,e.NODE_SNAPSHOT_PROPERTIES=["nodeType","textContent","childNodeCount","hasChildNodes","childElementCount","hasChildElements"],e.ELEMENT_SNAPSHOT_PROPERTIES=["tagName","visible","focused","attributes","boundingClientRect","classNames","style","innerText","namespaceURI","id","value","checked","selected","selectedIndex","scrollWidth","scrollHeight","scrollLeft","scrollTop","offsetWidth","offsetHeight","offsetLeft","offsetTop","clientWidth","clientHeight","clientLeft","clientTop"]}}},errors:{"test-run":{"index.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.SetNativeDialogHandlerCodeWrongTypeError=e.UncaughtErrorInNativeDialogHandler=e.NativeDialogNotHandledError=e.CurrentIframeIsInvisibleError=e.CurrentIframeNotFoundError=e.CurrentIframeIsNotLoadedError=e.ActionIframeIsNotLoadedError=e.ActionElementNotIframeError=e.RoleSwitchInRoleInitializerError=e.WindowDimensionsOverflowError=e.ActionElementIsNotFileInputError=e.ActionCanNotFindFileToUploadError=e.ActionIncorrectKeysError=e.ActionRootContainerNotFoundError=e.ActionElementNonContentEditableError=e.ActionElementNotTextAreaError=e.ActionElementNonEditableError=e.ActionAdditionalSelectorMatchesWrongNodeTypeError=e.ActionAdditionalElementIsInvisibleError=e.ActionAdditionalElementNotFoundError=e.ActionSelectorMatchesWrongNodeTypeError=e.ActionElementIsInvisibleError=e.ActionElementNotFoundError=e.ActionSelectorError=e.ActionUnsupportedDeviceTypeError=e.SetTestSpeedArgumentError=e.ActionStringArrayElementError=e.ActionStringOrStringArrayArgumentError=e.ActionPositiveIntegerArgumentError=e.ActionRoleArgumentError=e.ActionIntegerArgumentError=e.ActionStringArgumentError=e.ActionOptionsTypeError=e.ActionSpeedOptionError=e.ActionBooleanOptionError=e.ActionPositiveIntegerOptionError=e.ActionIntegerOptionError=e.AssertionExecutableArgumentError=e.ExternalAssertionLibraryError=e.UncaughtErrorInCustomDOMPropertyCode=e.UncaughtErrorInClientFunctionCode=e.UncaughtNonErrorObjectInTestCode=e.UncaughtErrorInTestCode=e.UncaughtErrorOnPage=e.PageLoadError=e.CantObtainInfoForElementSpecifiedBySelectorError=e.InvalidSelectorResultError=e.DomNodeClientFunctionResultError=e.ClientFunctionExecutionInterruptionError=e.MissingAwaitError=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n("./type"),l=r(u),c=function h(e){a(this,h),this.type=e,this.isTestCafeError=!0,this.callsite=null},d=function(e){function t(n,r,i){a(this,t);var s=o(this,e.call(this,n));return s.optionName=r,s.actualValue=i,s}return i(t,e),t}(c),f=function(e){function t(n,r,i){a(this,t);var s=o(this,e.call(this,n));return s.argumentName=r,s.actualValue=i,s}return i(t,e),t}(c);
e.MissingAwaitError=function(e){function t(n){a(this,t);var r=o(this,e.call(this,l["default"].missingAwaitError));return r.callsite=n,r}return i(t,e),t}(c),e.ClientFunctionExecutionInterruptionError=function(e){function t(n){a(this,t);var r=o(this,e.call(this,l["default"].clientFunctionExecutionInterruptionError));return r.instantiationCallsiteName=n,r}return i(t,e),t}(c),e.DomNodeClientFunctionResultError=function(e){function t(n){a(this,t);var r=o(this,e.call(this,l["default"].domNodeClientFunctionResultError));return r.instantiationCallsiteName=n,r}return i(t,e),t}(c),e.InvalidSelectorResultError=function(e){function t(){return a(this,t),o(this,e.call(this,l["default"].invalidSelectorResultError))}return i(t,e),t}(c),e.CantObtainInfoForElementSpecifiedBySelectorError=function(e){function t(n){a(this,t);var r=o(this,e.call(this,l["default"].cantObtainInfoForElementSpecifiedBySelectorError));return r.callsite=n,r}return i(t,e),t}(c),e.PageLoadError=function(e){function t(n){a(this,t);var r=o(this,e.call(this,l["default"].pageLoadError));return r.errMsg=n,r}return i(t,e),t}(c),e.UncaughtErrorOnPage=function(e){function t(n,r){a(this,t);var i=o(this,e.call(this,l["default"].uncaughtErrorOnPage));return i.errMsg=n,i.pageDestUrl=r,i}return i(t,e),t}(c),e.UncaughtErrorInTestCode=function(e){function t(n,r){a(this,t);var i=o(this,e.call(this,l["default"].uncaughtErrorInTestCode));return i.errMsg=String(n),i.callsite=r,i}return i(t,e),t}(c),e.UncaughtNonErrorObjectInTestCode=function(e){function t(n){a(this,t);var r=o(this,e.call(this,l["default"].uncaughtNonErrorObjectInTestCode));return r.objType="undefined"==typeof n?"undefined":s(n),r.objStr=String(n),r}return i(t,e),t}(c),e.UncaughtErrorInClientFunctionCode=function(e){function t(n,r){a(this,t);var i=o(this,e.call(this,l["default"].uncaughtErrorInClientFunctionCode));return i.errMsg=String(r),i.instantiationCallsiteName=n,i}return i(t,e),t}(c),e.UncaughtErrorInCustomDOMPropertyCode=function(e){function t(n,r,i){a(this,t);var s=o(this,e.call(this,l["default"].uncaughtErrorInCustomDOMPropertyCode,r,i));return s.errMsg=String(r),s.property=i,s.instantiationCallsiteName=n,s}return i(t,e),t}(c),e.ExternalAssertionLibraryError=function(e){function t(n,r){a(this,t);var i=o(this,e.call(this,l["default"].externalAssertionLibraryError));return i.errMsg=String(n),i.callsite=r,i}return i(t,e),t}(c),e.AssertionExecutableArgumentError=function(e){function t(n,r,i){a(this,t);var s=o(this,e.call(this,l["default"].assertionExecutableArgumentError,n,r));return s.errMsg=i,s}return i(t,e),t}(f),e.ActionIntegerOptionError=function(e){function t(n,r){return a(this,t),o(this,e.call(this,l["default"].actionIntegerOptionError,n,r))}return i(t,e),t}(d),e.ActionPositiveIntegerOptionError=function(e){function t(n,r){return a(this,t),o(this,e.call(this,l["default"].actionPositiveIntegerOptionError,n,r))}return i(t,e),t}(d),e.ActionBooleanOptionError=function(e){function t(n,r){return a(this,t),o(this,e.call(this,l["default"].actionBooleanOptionError,n,r))}return i(t,e),t}(d),e.ActionSpeedOptionError=function(e){function t(n,r){return a(this,t),o(this,e.call(this,l["default"].actionSpeedOptionError,n,r))}return i(t,e),t}(d),e.ActionOptionsTypeError=function(e){function t(n){a(this,t);var r=o(this,e.call(this,l["default"].actionOptionsTypeError));return r.actualType=n,r}return i(t,e),t}(c),e.ActionStringArgumentError=function(e){function t(n,r){return a(this,t),o(this,e.call(this,l["default"].actionStringArgumentError,n,r))}return i(t,e),t}(f),e.ActionIntegerArgumentError=function(e){function t(n,r){return a(this,t),o(this,e.call(this,l["default"].actionIntegerArgumentError,n,r))}return i(t,e),t}(f),e.ActionRoleArgumentError=function(e){function t(n,r){return a(this,t),o(this,e.call(this,l["default"].actionRoleArgumentError,n,r))}return i(t,e),t}(f),e.ActionPositiveIntegerArgumentError=function(e){function t(n,r){return a(this,t),o(this,e.call(this,l["default"].actionPositiveIntegerArgumentError,n,r))}return i(t,e),t}(f),e.ActionStringOrStringArrayArgumentError=function(e){function t(n,r){return a(this,t),o(this,e.call(this,l["default"].actionStringOrStringArrayArgumentError,n,r))}return i(t,e),t}(f),e.ActionStringArrayElementError=function(e){function t(n,r,i){a(this,t);var s=o(this,e.call(this,l["default"].actionStringArrayElementError,n,r));return s.elementIndex=i,s}return i(t,e),t}(f),e.SetTestSpeedArgumentError=function(e){function t(n,r){return a(this,t),o(this,e.call(this,l["default"].setTestSpeedArgumentError,n,r))}return i(t,e),t}(f),e.ActionUnsupportedDeviceTypeError=function(e){function t(n,r){return a(this,t),o(this,e.call(this,l["default"].actionUnsupportedDeviceTypeError,n,r))}return i(t,e),t}(f),e.ActionSelectorError=function(e){function t(n,r){a(this,t);var i=o(this,e.call(this,l["default"].actionSelectorError));return i.selectorName=n,i.errMsg=r,i}return i(t,e),t}(c),e.ActionElementNotFoundError=function(e){function t(){return a(this,t),o(this,e.call(this,l["default"].actionElementNotFoundError))}return i(t,e),t}(c),e.ActionElementIsInvisibleError=function(e){function t(){return a(this,t),o(this,e.call(this,l["default"].actionElementIsInvisibleError))}return i(t,e),t}(c),e.ActionSelectorMatchesWrongNodeTypeError=function(e){function t(n){a(this,t);var r=o(this,e.call(this,l["default"].actionSelectorMatchesWrongNodeTypeError));return r.nodeDescription=n,r}return i(t,e),t}(c),e.ActionAdditionalElementNotFoundError=function(e){function t(n){a(this,t);var r=o(this,e.call(this,l["default"].actionAdditionalElementNotFoundError));return r.argumentName=n,r}return i(t,e),t}(c),e.ActionAdditionalElementIsInvisibleError=function(e){function t(n){a(this,t);var r=o(this,e.call(this,l["default"].actionAdditionalElementIsInvisibleError));return r.argumentName=n,r}return i(t,e),t}(c),e.ActionAdditionalSelectorMatchesWrongNodeTypeError=function(e){function t(n,r){a(this,t);var i=o(this,e.call(this,l["default"].actionAdditionalSelectorMatchesWrongNodeTypeError));return i.argumentName=n,i.nodeDescription=r,i}return i(t,e),t}(c),e.ActionElementNonEditableError=function(e){function t(){return a(this,t),o(this,e.call(this,l["default"].actionElementNonEditableError))}return i(t,e),t}(c),e.ActionElementNotTextAreaError=function(e){function t(){return a(this,t),o(this,e.call(this,l["default"].actionElementNotTextAreaError))}return i(t,e),t}(c),e.ActionElementNonContentEditableError=function(e){function t(n){a(this,t);var r=o(this,e.call(this,l["default"].actionElementNonContentEditableError));return r.argumentName=n,r}return i(t,e),t}(c),e.ActionRootContainerNotFoundError=function(e){function t(){return a(this,t),o(this,e.call(this,l["default"].actionRootContainerNotFoundError))}return i(t,e),t}(c),e.ActionIncorrectKeysError=function(e){function t(n){a(this,t);var r=o(this,e.call(this,l["default"].actionIncorrectKeysError));return r.argumentName=n,r}return i(t,e),t}(c),e.ActionCanNotFindFileToUploadError=function(e){function t(n){a(this,t);var r=o(this,e.call(this,l["default"].actionCanNotFindFileToUploadError));return r.filePaths=n,r}return i(t,e),t}(c),e.ActionElementIsNotFileInputError=function(e){function t(){return a(this,t),o(this,e.call(this,l["default"].actionElementIsNotFileInputError))}return i(t,e),t}(c),e.WindowDimensionsOverflowError=function(e){function t(n){a(this,t);var r=o(this,e.call(this,l["default"].windowDimensionsOverflowError));return r.callsite=n,r}return i(t,e),t}(c),e.RoleSwitchInRoleInitializerError=function(e){function t(n){a(this,t);var r=o(this,e.call(this,l["default"].roleSwitchInRoleInitializerError));return r.callsite=n,r}return i(t,e),t}(c),e.ActionElementNotIframeError=function(e){function t(){return a(this,t),o(this,e.call(this,l["default"].actionElementNotIframeError))}return i(t,e),t}(c),e.ActionIframeIsNotLoadedError=function(e){function t(){return a(this,t),o(this,e.call(this,l["default"].actionIframeIsNotLoadedError))}return i(t,e),t}(c),e.CurrentIframeIsNotLoadedError=function(e){function t(){return a(this,t),o(this,e.call(this,l["default"].currentIframeIsNotLoadedError))}return i(t,e),t}(c),e.CurrentIframeNotFoundError=function(e){function t(){return a(this,t),o(this,e.call(this,l["default"].currentIframeNotFoundError))}return i(t,e),t}(c),e.CurrentIframeIsInvisibleError=function(e){function t(){return a(this,t),o(this,e.call(this,l["default"].currentIframeIsInvisibleError))}return i(t,e),t}(c),e.NativeDialogNotHandledError=function(e){function t(n,r){a(this,t);var i=o(this,e.call(this,l["default"].nativeDialogNotHandledError));return i.dialogType=n,i.pageUrl=r,i}return i(t,e),t}(c),e.UncaughtErrorInNativeDialogHandler=function(e){function t(n,r,i){a(this,t);var s=o(this,e.call(this,l["default"].uncaughtErrorInNativeDialogHandler));return s.dialogType=n,s.errMsg=r,s.pageUrl=i,s}return i(t,e),t}(c),e.SetNativeDialogHandlerCodeWrongTypeError=function(e){function t(n){a(this,t);var r=o(this,e.call(this,l["default"].setNativeDialogHandlerCodeWrongTypeError));return r.actualType=n,r}return i(t,e),t}(c)},"type.js":function(e,t,n){e.__esModule=!0,e["default"]={uncaughtErrorOnPage:"uncaughtErrorOnPage",uncaughtErrorInTestCode:"uncaughtErrorInTestCode",uncaughtNonErrorObjectInTestCode:"uncaughtNonErrorObjectInTestCode",uncaughtErrorInClientFunctionCode:"uncaughtErrorInClientFunctionCode",uncaughtErrorInCustomDOMPropertyCode:"uncaughtErrorInCustomDOMPropertyCode",missingAwaitError:"missingAwaitError",actionIntegerOptionError:"actionIntegerOptionError",actionPositiveIntegerOptionError:"actionPositiveIntegerOptionError",actionBooleanOptionError:"actionBooleanOptionError",actionSpeedOptionError:"actionSpeedOptionError",actionOptionsTypeError:"actionOptionsTypeError",actionStringArgumentError:"actionStringArgumentError",actionStringOrStringArrayArgumentError:"actionStringOrStringArrayArgumentError",actionStringArrayElementError:"actionStringArrayElementError",actionIntegerArgumentError:"actionIntegerArgumentError",actionRoleArgumentError:"actionRoleArgumentError",actionPositiveIntegerArgumentError:"actionPositiveIntegerArgumentError",actionSelectorError:"actionSelectorError",actionElementNotFoundError:"actionElementNotFoundError",actionElementIsInvisibleError:"actionElementIsInvisibleError",actionSelectorMatchesWrongNodeTypeError:"actionSelectorMatchesWrongNodeTypeError",actionAdditionalElementNotFoundError:"actionAdditionalElementNotFoundError",actionAdditionalElementIsInvisibleError:"actionAdditionalElementIsInvisibleError",actionAdditionalSelectorMatchesWrongNodeTypeError:"actionAdditionalSelectorMatchesWrongNodeTypeError",actionElementNonEditableError:"actionElementNonEditableError",actionElementNotTextAreaError:"actionElementNotTextAreaError",actionElementNonContentEditableError:"actionElementNonContentEditableError",actionElementIsNotFileInputError:"actionElementIsNotFileInputError",actionRootContainerNotFoundError:"actionRootContainerNotFoundError",actionIncorrectKeysError:"actionIncorrectKeysError",actionCanNotFindFileToUploadError:"actionCanNotFindFileToUploadError",actionUnsupportedDeviceTypeError:"actionUnsupportedDeviceTypeError",actionIframeIsNotLoadedError:"actionIframeIsNotLoadedError",actionElementNotIframeError:"actionElementNotIframeError",currentIframeIsNotLoadedError:"currentIframeIsNotLoadedError",currentIframeNotFoundError:"currentIframeNotFoundError",currentIframeIsInvisibleError:"currentIframeIsInvisibleError",nativeDialogNotHandledError:"nativeDialogNotHandledError",uncaughtErrorInNativeDialogHandler:"uncaughtErrorInNativeDialogHandler",setTestSpeedArgumentError:"setTestSpeedArgumentError",setNativeDialogHandlerCodeWrongTypeError:"setNativeDialogHandlerCodeWrongTypeError",clientFunctionExecutionInterruptionError:"clientFunctionExecutionInterruptionError",domNodeClientFunctionResultError:"domNodeClientFunctionResultError",invalidSelectorResultError:"invalidSelectorResultError",cantObtainInfoForElementSpecifiedBySelectorError:"cantObtainInfoForElementSpecifiedBySelectorError",externalAssertionLibraryError:"externalAssertionLibraryError",pageLoadError:"pageLoadError",windowDimensionsOverflowError:"windowDimensionsOverflowError",roleSwitchInRoleInitializerError:"roleSwitchInRoleInitializerError",assertionExecutableArgumentError:"assertionExecutableArgumentError"},t.exports=e["default"]}}},"test-run":{"browser-console-messages.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}e.__esModule=!0;var s=n("../utils/assignable"),u=r(s),l=function(e){function t(n){o(this,t);var r=i(this,e.call(this));return r.log=[],r.info=[],r.warn=[],r.error=[],r._assignFrom(n),r}return a(t,e),t.prototype._getAssignableProperties=function(){return[{name:"log"},{name:"info"},{name:"warn"},{name:"error"}]},t.prototype.concat=function(e){this.log=this.log.concat(e.log),this.info=this.info.concat(e.info),this.warn=this.warn.concat(e.warn),this.error=this.error.concat(e.error)},t.prototype.addMessage=function(e,t){this[e].push(t)},t.prototype.getCopy=function(){for(var e={},t=this._getAssignableProperties(),n=t,r=Array.isArray(n),o=0,n=r?n:n[Symbol.iterator]();;){var i;if(r){if(o>=n.length)break;i=n[o++]}else{if(o=n.next(),o.done)break;i=o.value}var a=i;e[a.name]=this[a.name].slice()}return e},t}(u["default"]);e["default"]=l,t.exports=e["default"]},"client-messages.js":function(e,t,n){e.__esModule=!0,e["default"]={ready:"ready",readyForBrowserManipulation:"ready-for-browser-manipulation",waitForFileDownload:"wait-for-file-download"},t.exports=e["default"]},commands:{"type.js":function(e,t,n){e.__esModule=!0,e["default"]={click:"click",rightClick:"right-click",doubleClick:"double-click",drag:"drag",dragToElement:"drag-to-element",hover:"hover",typeText:"type-text",selectText:"select-text",selectTextAreaContent:"select-text-area-content",selectEditableContent:"select-editable-content",pressKey:"press-key",wait:"wait",navigateTo:"navigate-to",setFilesToUpload:"set-files-to-upload",clearUpload:"clear-upload",executeClientFunction:"execute-client-function",executeSelector:"execute-selector",takeScreenshot:"take-screenshot",takeScreenshotOnFail:"take-screenshot-on-fail",prepareBrowserManipulation:"prepare-browser-manipulation",showAssertionRetriesStatus:"show-assertion-retries-status",hideAssertionRetriesStatus:"hide-assertion-retries-status",setBreakpoint:"set-breakpoint",resizeWindow:"resize-window",resizeWindowToFitDevice:"resize-window-to-fit-device",maximizeWindow:"maximize-window",switchToIframe:"switch-to-iframe",switchToMainWindow:"switch-to-main-window",setNativeDialogHandler:"set-native-dialog-handler",getNativeDialogHistory:"get-native-dialog-history",getBrowserConsoleMessages:"get-browser-console-messages",setTestSpeed:"set-test-speed",setPageLoadTimeout:"set-page-load-timeout",debug:"debug",assertion:"assertion",useRole:"useRole",testDone:"test-done",backupStorages:"backup-storages"},t.exports=e["default"]},"utils.js":function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){return!a(e)&&!l(e)&&!f(e)||c(e)&&!s(e)}function i(e){return e.type===E["default"].executeClientFunction||e.type===E["default"].executeSelector}function a(e){return i(e)||e.type===E["default"].wait||e.type===E["default"].assertion}function s(e){return e.type===E["default"].switchToIframe||e.type===E["default"].switchToMainWindow}function u(e){return e.type!==E["default"].debug&&!i(e)&&!l(e)&&!f(e)}function l(e){return e.type===E["default"].takeScreenshot||e.type===E["default"].takeScreenshotOnFail||e.type===E["default"].resizeWindow||e.type===E["default"].resizeWindowToFitDevice||e.type===E["default"].maximizeWindow}function c(e){return e.type===E["default"].prepareBrowserManipulation&&(e.manipulationCommandType===E["default"].resizeWindow||e.manipulationCommandType===E["default"].resizeWindowToFitDevice||e.manipulationCommandType===E["default"].maximizeWindow)}function d(e){return e.type===E["default"].prepareBrowserManipulation&&e.manipulationCommandType===E["default"].takeScreenshotOnFail}function f(e){return e.type===E["default"].testDone||e.type===E["default"].takeScreenshotOnFail||e.type===E["default"].showAssertionRetriesStatus||e.type===E["default"].hideAssertionRetriesStatus||e.type===E["default"].setBreakpoint||d(e)}function h(e){return e.type===E["default"].testDone||e.type===E["default"].prepareBrowserManipulation||e.type===E["default"].switchToMainWindow||e.type===E["default"].setNativeDialogHandler||e.type===E["default"].getNativeDialogHistory||e.type===E["default"].setTestSpeed||e.type===E["default"].showAssertionRetriesStatus||e.type===E["default"].hideAssertionRetriesStatus||e.type===E["default"].setBreakpoint}function p(e){return null!==e&&"object"===("undefined"==typeof e?"undefined":m(e))&&e.type===v&&"string"==typeof e.value}e.__esModule=!0;var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.isCommandRejectableByPageError=o,e.canSetDebuggerBreakpointBeforeCommand=u,e.isBrowserManipulationCommand=l,e.isServiceCommand=f,e.isExecutableInTopWindowOnly=h,e.isJSExpression=p;var g=n("./type"),E=r(g),v="js-expr"}}},utils:{"assignable.js":function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function e(){r(this,e)}return e.prototype._getAssignableProperties=function(){throw new Error("Not implemented")},e.prototype._assignFrom=function(e,t){if(e)for(var n=this._getAssignableProperties(),r=0;r<n.length;r++){for(var o=n[r],i=o.name,a=o.type,s=o.required,u=o.init,l=i.split("."),c=l.length-1,d=l[c],f=e,h=this,p=0;p<c&&f&&h;p++)f=f[l[p]],h=h[l[p]];if(f&&h){var m=f[d];(void 0!==m||s)&&(t&&a&&a(i,m),h[d]=u?u(i,m):m)}}},e}();e["default"]=o,t.exports=e["default"]}}}}})("testcafe-phoenix/src/client/driver/index")}initTestCafeClientDrivers(window)}();